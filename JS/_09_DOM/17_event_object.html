<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    // [키보드 이벤트]
    // keydown   : 키가 눌릴 때 발생(아시아권 문자: 한국어, 중국어, 일본어=>잘 처리 못하는 경우가 있음)
    // keypress  : 입력되었을 때(아시아권 문자: 한국어, 중국어, 일본어=>잘 처리 못하는 경우가 있음)
    // keyup     : 키를 뗄 때 발생(문자 입력시 이것을 사용)

    // 표준 이벤트 모델
    // document.body.addEventListener('keyup', (event)=> {});

    // 고전 이벤트 모델
    // document.body.onkeyup = (event) => {}

    // 인라인 이벤트 모델
    // <body onkeyup='listener(event)'>
    // </body>

    // textarea 상위 지역변수로 선언했으므로 접근 가능
    // document.addEventListener('DOMContentLoaded', () => {
    //   const textarea = document.querySelector('textarea');
    //   const h1 = document.querySelector('h1');

    //   textarea.addEventListener('keyup', (event) => {
    //     const length = textarea.value.length;
    //     h1.textContent = `글자 수 : ${length}`;
    //   });
    // })

    // textarea가 콜백함수의 지역변수이므로 다른 함수에서 접근이 불가
    // const listener = (event) => {
    //   const length = textarea.value.length;
    //   h1.textContent = `글자수: ${length}`;
    // }

    // document.addEventListener('DOMContentLoaded', () => {
    //   const textarea = document.querySelector('textarea');
    //   const h1 = document.querySelector('h1');

    //   textarea.addEventListener('keyup', listener);
    // })

    // 다른 영역의 textarea를 접근하는 방법 - 1
    // const listener = (event) => {
    //   const textarea = event.currentTarget;
    //   const length = textarea.value.length;
    //   h1.textContent = `글자수: ${length}`;
    // }

    // document.addEventListener('DOMContentLoaded', () => {
    //   const textarea = document.querySelector('textarea');
    //   const h1 = document.querySelector('h1');

    //   textarea.addEventListener('keyup', listener);
    // })

    // 다른 영역의 textarea를 접근하는 방법 - 2
    // 화살표 함수에서는 this를 사용하지 못하므로 function(event)를
    // 사용하면 listener의 this는 textarea를 가리키게된다.
    const listener = function() {
      const textarea = this;
      const length = textarea.value.length;
      h1.textContent = `글자수: ${length}`;
    }

    document.addEventListener('DOMContentLoaded', () => {
      const textarea = document.querySelector('textarea');
      const h1 = document.querySelector('h1');

      textarea.addEventListener('keyup', listener);
    })
  </script>
</head>

<body>
  <h1></h1>
  <textarea></textarea>
</body>

</html>